![Логотип](https://sun9-49.userapi.com/impf/vUR2BoEqxWBFxlS8bgegod-MgMnWHxT9cvgBVw/7VsKAznEPKc.jpg?size=1920x768&quality=95&crop=0,84,1000,399&sign=88e3cf3f330d2ae90aee2c89301d6698&type=cover_group)

Программа реализует игру на ПЛК, в которой:

На экране движется мишень-гаст из Майнкрафта (вверх-вниз).
Игрок может нажать на кнопку (к ней привязана переменная Kurok), чтобы выстрелить стрелой из лука.
Если выстрел попадает в зону мишени гаста, то это считается попаданием и засчитывается очко, после попадания происходит пауза, затем гаст продолжает движение.

Краткое описание кода:

1. Активация системы

Входной сигнал a1 активирует флаг b1, который включает всё поведение системы.

2. Движение гаста

Гаст с координатами c1, d1 движется вверх и вниз:

  Движение вверх контролирует триггер SR1.
  Достигнув верхней границы (d1 >= 250), включается SR2 — движение вниз.
  Достигнув нижней границы (d1 <= 0), снова включается SR1 — движение вверх.

3. Выстрел

При нажатии Kurok и при условии наличия мишени (st1), активируется триггер SR3:

  Стрела "создаётся" в начальной точке с координатами e1, e2 и фиксируются координаты паттерна patx, paty (появляются при точном попадании в гаста)

4. Движение стрелы

Пока SR3.Q1 = TRUE (пуля в полете), координата пули e1 увеличивается (летит по оси X), то есть выстрел еще не завершен.
После превышения максимального расстояния (e1 > 800), выстрел считается оконченным.

5. Обнаружение попадания

Если стрела достигает X координаты мишени (e1 - 750 >= c2) и по оси Y она находится в пределах мишени (e2 + 40 < c1 < e2 + 110), то:

  Координаты стрелы обнуляются и срабатывает триггер SR4 — попадание.

  В этом случае на экране появляются красные точки — визуальные метки попадания (следы стрелы), которые показывают точное попадание по мишени.

Если же выстрел не попадает в зону мишени, то:

  Не срабатывает флаг попадания, и чтобы продолжить игру, нужно перезарядить лук (сбросить курок и подготовиться к следующему выстрелу).

6. Обработка попадания

Когда SR4 активен, то есть когда стрела попала в гаста:

  Все скорости объектов (vx1–vx6, vy1–vy6) сбрасываются в 0.
  Запускается таймер TP1 (на 2 секунды) — это пауза после попадания.
  По окончании паузы, триггер SR4 сбрасывается, игра продолжается.

7. Сброс

При сигнале sbr1 координаты всех паттернов (patx1–patx5, paty1–paty5) сбрасываются — это очистка всех визуальных следов попаданий (красных точек).
